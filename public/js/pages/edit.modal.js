document.addEventListener("DOMContentLoaded",function(){var e=document.querySelectorAll(".open-edit-modal"),t=document.querySelectorAll(".delete-leave");const d=document.getElementById("createButton"),m=document.getElementById("saveButton");var a=document.querySelector(".create-leave");let c,v;a.addEventListener("click",function(){m.style.display="none",d.style.display="inline-block"}),m.addEventListener("click",function(){var e=document.getElementById("manage_leave_leaveType").value,t=document.getElementById("manage_leave_employee").value,a=document.getElementById("manage_leave_startDate").value,n=document.getElementById("manage_leave_endDate").value,l=document.getElementById("manage_leave_leaveReason").value,o=document.getElementById("manage_leave_remark").value,r=c?"PUT":"POST",d=c?`/hrmsystem/manage_leave/${c}/edit/`+v:"/hrmsystem/manage_leave/"+v;fetch(d,{method:r,headers:{"Content-Type":"application/json"},body:JSON.stringify({employee:t,leaveType:e,startDate:a,endDate:n,leaveReason:l,remark:o})}).then(e=>{e.ok?window.location.reload():console.error("Form submission failed")}).catch(e=>{console.error("Error:",e)})}),e.forEach(r=>{r.addEventListener("click",function(e){d.style.display="none",m.style.display="inline-block",e.preventDefault(),v=r.getAttribute("user-id"),c=r.getAttribute("data-leave-id");var e=r.closest("tr"),t=e.querySelector(".manage_leave_employee").innerText,a=e.querySelector(".manage_leave_leaveType").innerText,n=e.querySelector(".manage_leave_startDate").innerText,l=e.querySelector(".manage_leave_endDate").innerText,o=e.querySelector(".manage_leave_leaveReason").innerText,e=e.querySelector(".manage_leave_remark").innerText;document.getElementById("manage_leave_employee").value=t,document.getElementById("manage_leave_leaveType").value=a,document.getElementById("manage_leave_startDate").value=n,document.getElementById("manage_leave_endDate").value=l,document.getElementById("manage_leave_leaveReason").value=o,document.getElementById("manage_leave_remark").value=e,new bootstrap.Modal(document.querySelector(".special"),{}).show()})}),t.forEach(a=>{a.addEventListener("click",function(e){e.preventDefault();var e=a.getAttribute("data-leave-id"),t=a.getAttribute("user-id");fetch(`/hrmsystem/manage_leave/${e}/delete/`+t,{method:"POST"}).then(e=>{e.ok?window.location.reload():console.error("Failed to delete leave")}).catch(e=>{console.error("Error:",e)})})})});